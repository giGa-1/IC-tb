'use client'
import Image from 'next/image'
import React, { useLayoutEffect, useRef, useEffect } from 'react'
import cl from './Header.module.css'; 
import Link from 'next/link';
import Button from '../UI/Button/Button';
import { gsap } from 'gsap';
import { ScrollTrigger } from "gsap/dist/ScrollTrigger";
gsap.registerPlugin(ScrollTrigger);

export default function Header() {

    const headerRef = useRef(null); 
    const blockRef = useRef(null); 
    const listOfLinks = [
        {link : '#home' , nameLink: 'home', id:1},
        {link : '#about', nameLink: 'about $OINK', id:2},
        {link :'#token', nameLink: 'tokenomics', id:3},
        {link : '#roadmap', nameLink: 'roadmap', id:4},
        {link :'#how', nameLink: 'how to buy', id:5},
    ]
    
    console.log(listOfLinks)
    useEffect(()=>{
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
        
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
        window.scrollTo({top:'0', behavior: 'smooth'})
      },[])
    

    useLayoutEffect(()=>{
        const comp = headerRef.current

        window.innerWidth<576?
            gsap.fromTo(comp,{y:0, opacity:1}, {
                y:  -30, background:'#1E1E1E',  ease:true,
                smoothOrigin:true,
                scrollTrigger:  {
                trigger: blockRef.current,
                markers:false,
                end: `top ${window.innerHeight/100*0}px`,
                start: `bottom ${window.innerHeight/100*0}px`,
                scrub: true
                }
            })
        : gsap.fromTo(comp,{y:0, opacity:1}, {
            y:  -65, background:'#1E1E1E',  ease:true,
            smoothOrigin:true,
            scrollTrigger:  {
              trigger: blockRef.current,
              markers:false,
              end: `top ${window.innerHeight/100*0}px`,
              start: `bottom ${window.innerHeight/100*0}px`,
              scrub: true
            }
          })

       
    },[])

  return (
    <>
<header ref={headerRef} className={[cl.header].join` `}>
       
       <div className={["container", cl.cont].join` `}>
           <a href='https://m.piggies.io' target='_blank' className={cl.logo}>
               <svg width="89" height="66" viewBox="0 0 89 66" fill="none" xmlns="http://www.w3.org/2000/svg">
                   <path d="M56.0537 9.10232C68.8834 9.10232 79.2694 19.5931 79.2694 32.5524C79.2694 45.5116 68.8834 56.0024 56.0537 56.0024H32.2271C19.3973 56.0024 9.01138 45.5116 9.01138 32.5524C9.01138 19.5931 19.3973 9.10232 32.2271 9.10232H56.0537ZM56.0537 0H32.2271C14.5098 0 3.05176e-05 14.502 3.05176e-05 32.5524C3.05176e-05 50.4484 14.3571 65.1047 32.2271 65.1047H56.0537C73.7709 65.1047 88.2807 50.6027 88.2807 32.5524C88.2807 14.6563 73.7709 0 56.0537 0Z" fill="#FBE288"/>
                   <path d="M33.9075 22.6788H30.7001C27.0344 22.6788 23.9797 25.7644 23.9797 29.467V35.6381C23.9797 39.3407 27.0344 42.4262 30.7001 42.4262H33.9075C37.5731 42.4262 40.6278 39.3407 40.6278 35.6381V29.467C40.6278 25.7644 37.7259 22.6788 33.9075 22.6788Z" fill="#FBE288"/>
                   <path d="M59.1085 22.6788H55.901C52.2354 22.6788 49.1807 25.7644 49.1807 29.467V35.6381C49.1807 39.3407 52.2354 42.4262 55.901 42.4262H59.1085C62.7741 42.4262 65.8288 39.3407 65.8288 35.6381V29.467C65.8288 25.7644 62.7741 22.6788 59.1085 22.6788Z" fill="#FBE288"/>
               </svg>
           </a>

           <div className={cl.blockNavSocial}>
           <nav className={cl.nav}>
               <ul className={cl.listNav} type='list'>
                   {listOfLinks.map(link=>{
                       return (
                           <React.Fragment key={link.id}>
                               <li className={cl.itemLink}  >
                                   <a href={link.link} className={cl.link}>
                                       {link.nameLink}
                                   </a>
                               </li>
                           </React.Fragment>
                       )
                   })}
               </ul>   
            </nav>

            <div className={cl.socialBlocki}>
               <a href=' https://discord.gg/piggies' target='_blank'>
                   <span className={[cl.link, cl.ds].join` `}>
                       <svg width="39" height="30" viewBox="0 0 39 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M32.9989 2.49318C30.5289 1.33099 27.8545 0.487459 25.0687 8.6224e-05C25.0443 -0.000702201 25.02 0.00392424 24.9975 0.0136403C24.9751 0.0233565 24.955 0.0379263 24.9387 0.0563219C24.6044 0.67491 24.2144 1.48095 23.9544 2.09954C20.9996 1.64965 17.9947 1.64965 15.0399 2.09954C14.7799 1.4622 14.3898 0.67491 14.037 0.0563219C14.0184 0.0188317 13.9627 8.6224e-05 13.907 8.6224e-05C11.1212 0.487459 8.46539 1.33099 5.97675 2.49318C5.95818 2.49318 5.93961 2.51193 5.92104 2.53067C0.869472 10.1599 -0.523424 17.583 0.163738 24.9311C0.163738 24.9685 0.18231 25.006 0.219454 25.0248C3.5624 27.4991 6.77535 28.9987 9.95115 29.9922C10.0069 30.011 10.0626 29.9922 10.0812 29.9547C10.824 28.9238 11.4926 27.8365 12.0684 26.6931C12.1055 26.6181 12.0683 26.5431 11.9941 26.5244C10.9355 26.112 9.93258 25.6246 8.94827 25.0623C8.87398 25.0248 8.87398 24.9123 8.92969 24.8561C9.13398 24.7061 9.33827 24.5374 9.54257 24.3875C9.57971 24.35 9.63543 24.35 9.67257 24.3687C16.0613 27.3117 22.9515 27.3117 29.266 24.3687C29.3031 24.35 29.3588 24.35 29.396 24.3875C29.6003 24.5562 29.8046 24.7061 30.0088 24.8748C30.0831 24.9311 30.0831 25.0435 29.9903 25.081C29.0245 25.6621 28.0031 26.1307 26.9445 26.5431C26.8702 26.5619 26.8516 26.6556 26.8702 26.7118C27.4645 27.8553 28.1331 28.9425 28.8574 29.9735C28.9131 29.9922 28.9688 30.011 29.0245 29.9922C32.2189 28.9987 35.4318 27.4991 38.7748 25.0248C38.8119 25.006 38.8305 24.9685 38.8305 24.9311C39.6477 16.4395 37.4748 9.07271 33.0732 2.53067C33.0546 2.51193 33.0361 2.49318 32.9989 2.49318ZM13.0341 20.451C11.1212 20.451 9.524 18.6702 9.524 16.477C9.524 14.2838 11.084 12.5031 13.0341 12.5031C15.0027 12.5031 16.5628 14.3026 16.5442 16.477C16.5442 18.6702 14.9841 20.451 13.0341 20.451ZM25.9787 20.451C24.0658 20.451 22.4686 18.6702 22.4686 16.477C22.4686 14.2838 24.0287 12.5031 25.9787 12.5031C27.9474 12.5031 29.5074 14.3026 29.4888 16.477C29.4888 18.6702 27.9474 20.451 25.9787 20.451Z" fill="#B7B8BD"/>
                       </svg>
                   </span>
               </a>
               <a href={'https://twitter.com/JiggyPiggies'} target='_blank' >
                   <span className={[cl.link, cl.twitter].join` `}>
                       <svg width="38" height="31" viewBox="0 0 38 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M38 3.64706C36.6013 4.28529 35.0937 4.70471 33.5316 4.90529C35.13 3.93882 36.3652 2.40706 36.9465 0.565294C35.4388 1.47706 33.7677 2.11529 32.0057 2.48C30.5707 0.911765 28.5545 0 26.2658 0C21.9971 0 18.5096 3.50118 18.5096 7.82294C18.5096 8.44294 18.5822 9.04471 18.7094 9.61C12.2428 9.28176 6.4847 6.16353 2.65201 1.44059C1.97992 2.58941 1.59847 3.93882 1.59847 5.36118C1.59847 8.07824 2.9608 10.4853 5.06788 11.8529C3.7782 11.8529 2.57935 11.4882 1.52581 10.9412V10.9959C1.52581 14.7888 4.21415 17.9618 7.77438 18.6729C6.63134 18.987 5.43134 19.0307 4.26864 18.8006C4.762 20.3551 5.72822 21.7153 7.03148 22.69C8.33475 23.6648 9.90951 24.205 11.5344 24.2347C8.78002 26.4237 5.36577 27.607 1.85277 27.59C1.23518 27.59 0.617591 27.5535 0 27.4806C3.45124 29.7053 7.55641 31 11.9522 31C26.2658 31 34.131 19.0741 34.131 8.73471C34.131 8.38824 34.131 8.06 34.1128 7.71353C35.6386 6.61941 36.9465 5.23353 38 3.64706Z" fill="#B7B8BD"/>
                       </svg>
                   </span>
               </a> 
                   
                   <a href='https://raydium.io/liquidity/add/?coin0=sol&coin1=7r9P3pjiTYNxF9oCkuJKxDGfywBcXGy9J6dpCMxhuDbd&fixed=coin0&ammId=BPf1eLqauaP3DVtcyjowe7uk6rey7mWW4MpcQkaW7jAg' target='_blank'>
                    <Button classBtn={cl.btn}>BUY</Button>
                    </a>
            </div>
           </div>
       </div>
       <div className={['container', cl.contM].join` `}>
           <div className={cl.socialBLockM}>
               <a  href={'https://discord.gg/piggies'} target='_blank'>
                   <span className={[cl.link, cl.ds].join` `}>
                       <svg width="27" height="21" viewBox="0 0 39 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M32.9989 2.49318C30.5289 1.33099 27.8545 0.487459 25.0687 8.6224e-05C25.0443 -0.000702201 25.02 0.00392424 24.9975 0.0136403C24.9751 0.0233565 24.955 0.0379263 24.9387 0.0563219C24.6044 0.67491 24.2144 1.48095 23.9544 2.09954C20.9996 1.64965 17.9947 1.64965 15.0399 2.09954C14.7799 1.4622 14.3898 0.67491 14.037 0.0563219C14.0184 0.0188317 13.9627 8.6224e-05 13.907 8.6224e-05C11.1212 0.487459 8.46539 1.33099 5.97675 2.49318C5.95818 2.49318 5.93961 2.51193 5.92104 2.53067C0.869472 10.1599 -0.523424 17.583 0.163738 24.9311C0.163738 24.9685 0.18231 25.006 0.219454 25.0248C3.5624 27.4991 6.77535 28.9987 9.95115 29.9922C10.0069 30.011 10.0626 29.9922 10.0812 29.9547C10.824 28.9238 11.4926 27.8365 12.0684 26.6931C12.1055 26.6181 12.0683 26.5431 11.9941 26.5244C10.9355 26.112 9.93258 25.6246 8.94827 25.0623C8.87398 25.0248 8.87398 24.9123 8.92969 24.8561C9.13398 24.7061 9.33827 24.5374 9.54257 24.3875C9.57971 24.35 9.63543 24.35 9.67257 24.3687C16.0613 27.3117 22.9515 27.3117 29.266 24.3687C29.3031 24.35 29.3588 24.35 29.396 24.3875C29.6003 24.5562 29.8046 24.7061 30.0088 24.8748C30.0831 24.9311 30.0831 25.0435 29.9903 25.081C29.0245 25.6621 28.0031 26.1307 26.9445 26.5431C26.8702 26.5619 26.8516 26.6556 26.8702 26.7118C27.4645 27.8553 28.1331 28.9425 28.8574 29.9735C28.9131 29.9922 28.9688 30.011 29.0245 29.9922C32.2189 28.9987 35.4318 27.4991 38.7748 25.0248C38.8119 25.006 38.8305 24.9685 38.8305 24.9311C39.6477 16.4395 37.4748 9.07271 33.0732 2.53067C33.0546 2.51193 33.0361 2.49318 32.9989 2.49318ZM13.0341 20.451C11.1212 20.451 9.524 18.6702 9.524 16.477C9.524 14.2838 11.084 12.5031 13.0341 12.5031C15.0027 12.5031 16.5628 14.3026 16.5442 16.477C16.5442 18.6702 14.9841 20.451 13.0341 20.451ZM25.9787 20.451C24.0658 20.451 22.4686 18.6702 22.4686 16.477C22.4686 14.2838 24.0287 12.5031 25.9787 12.5031C27.9474 12.5031 29.5074 14.3026 29.4888 16.477C29.4888 18.6702 27.9474 20.451 25.9787 20.451Z" fill="#B7B8BD"/>
                       </svg>
                   </span>
               </a>
               <a href={'https://twitter.com/JiggyPiggies'} target='_blank'>
                   <span className={[cl.link, cl.twitter].join` `}>
                       <svg width="27" height="22" viewBox="0 0 38 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                       <path d="M38 3.64706C36.6013 4.28529 35.0937 4.70471 33.5316 4.90529C35.13 3.93882 36.3652 2.40706 36.9465 0.565294C35.4388 1.47706 33.7677 2.11529 32.0057 2.48C30.5707 0.911765 28.5545 0 26.2658 0C21.9971 0 18.5096 3.50118 18.5096 7.82294C18.5096 8.44294 18.5822 9.04471 18.7094 9.61C12.2428 9.28176 6.4847 6.16353 2.65201 1.44059C1.97992 2.58941 1.59847 3.93882 1.59847 5.36118C1.59847 8.07824 2.9608 10.4853 5.06788 11.8529C3.7782 11.8529 2.57935 11.4882 1.52581 10.9412V10.9959C1.52581 14.7888 4.21415 17.9618 7.77438 18.6729C6.63134 18.987 5.43134 19.0307 4.26864 18.8006C4.762 20.3551 5.72822 21.7153 7.03148 22.69C8.33475 23.6648 9.90951 24.205 11.5344 24.2347C8.78002 26.4237 5.36577 27.607 1.85277 27.59C1.23518 27.59 0.617591 27.5535 0 27.4806C3.45124 29.7053 7.55641 31 11.9522 31C26.2658 31 34.131 19.0741 34.131 8.73471C34.131 8.38824 34.131 8.06 34.1128 7.71353C35.6386 6.61941 36.9465 5.23353 38 3.64706Z" fill="#B7B8BD"/>
                       </svg>
                   </span>
               </a> 
               <a target='_blank' href={'https://raydium.io/liquidity/add/?coin0=sol&coin1=7r9P3pjiTYNxF9oCkuJKxDGfywBcXGy9J6dpCMxhuDbd&fixed=coin0&ammId=BPf1eLqauaP3DVtcyjowe7uk6rey7mWW4MpcQkaW7jAg'} >
                 
                       <svg width="68" height="45" viewBox="0 0 89 66" fill="none" xmlns="http://www.w3.org/2000/svg">
                           <path d="M56.0537 9.10232C68.8834 9.10232 79.2694 19.5931 79.2694 32.5524C79.2694 45.5116 68.8834 56.0024 56.0537 56.0024H32.2271C19.3973 56.0024 9.01138 45.5116 9.01138 32.5524C9.01138 19.5931 19.3973 9.10232 32.2271 9.10232H56.0537ZM56.0537 0H32.2271C14.5098 0 3.05176e-05 14.502 3.05176e-05 32.5524C3.05176e-05 50.4484 14.3571 65.1047 32.2271 65.1047H56.0537C73.7709 65.1047 88.2807 50.6027 88.2807 32.5524C88.2807 14.6563 73.7709 0 56.0537 0Z" fill="#FBE288"/>
                           <path d="M33.9075 22.6788H30.7001C27.0344 22.6788 23.9797 25.7644 23.9797 29.467V35.6381C23.9797 39.3407 27.0344 42.4262 30.7001 42.4262H33.9075C37.5731 42.4262 40.6278 39.3407 40.6278 35.6381V29.467C40.6278 25.7644 37.7259 22.6788 33.9075 22.6788Z" fill="#FBE288"/>
                           <path d="M59.1085 22.6788H55.901C52.2354 22.6788 49.1807 25.7644 49.1807 29.467V35.6381C49.1807 39.3407 52.2354 42.4262 55.901 42.4262H59.1085C62.7741 42.4262 65.8288 39.3407 65.8288 35.6381V29.467C65.8288 25.7644 62.7741 22.6788 59.1085 22.6788Z" fill="#FBE288"/>
                       </svg>
                   
               </a>    
               
           </div>
       </div>
   </header>
   <div ref={blockRef} className={cl.blockRef}></div>
    </>
    
  )
}
